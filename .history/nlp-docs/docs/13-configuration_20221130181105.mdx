# Configuration

**TODO:**

Explain common configuration process:

- applySettings
- registerDefaults
- apply settings using tag

How to register custom plugins

## BERT Open Question

packages/bert-open-question/src/bert-open-question.js

## Bot

**Tag** &rarr; bot

| Setting              |       Type        | Description                                                                                                            |
| :------------------- | :---------------: | :--------------------------------------------------------------------------------------------------------------------- |
| globalFallbackDialog |      String       | Name of the dialog to be executed in case of errors while processing the bot flow. Defaults to '/globalFallbackDialog' |
| scripts              | String / String[] | Path to the script/s to load by the bot. Can be a single path or an array of paths                                     |

#### Default values

Bot registers the following validators: email,url,ip,ipv4,ipv6,phone,number,integer and date.

**TODO**: link to where validators are explained

## DialogManager

NOTHING HERE

## Test connector

**Tag** &rarr; N/A

Inherits settings from connector, plus:

| Setting                 | Type | Description |
| :---------------------- | :--: | :---------- |
| settings.trimInput      |      |             |
| userName                |      |             |
| settings.conversationId |      |             |

**TODO**

## builtin-compromise

NOTHING HERE

## builtin-default

**Tag** &rarr; builtin-default

| Setting  |   Type   | Description                                                                                                             |
| :------- | :------: | :---------------------------------------------------------------------------------------------------------------------- |
| builtins | String[] | List of default builtins to load. Defaults to ['Email', 'URL', 'IpAddress', 'PhoneNumber', 'Hashtag', 'Number', 'Date'] |

**TODO**

## builtin-duckling

**Tag** &rarr; builtin-duckling

| Setting     |  Type  | Description                                                                                                                                                                                    |
| :---------- | :----: | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ducklingUrl | String | Duckling service url. Defaults to value in environment variable DUCKLING_URL. In case neither the setting nor the environment variable are provided, defaults to `http://localhost:8000/parse` |

**TODO**

## builtin-microsoft

**Tag** &rarr; builtin-microsoft

| Setting          |   Type   | Description                                                                                                                                                                                                                                                                                               |
| :--------------- | :------: | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| builtins         | String[] | List of default builtins to load. Defaults to ['Number', 'Ordinal', 'Percentage', 'Age', 'Currency', 'Dimension', 'Temperature', 'DateTime', 'PhoneNumber', 'IpAddress', 'Boolean', 'Email', 'Hashtag', 'URL']                                                                                            |
| builtinAllowList | String[] | Defaults to [ 'age', 'currency', 'dimension', 'temperature', 'number', 'numberrange', 'ordinal', 'percentage', 'email', 'hashtag', 'ip', 'mention', 'phonenumber', 'url', 'date', 'daterange', 'datetime', 'datetimealt', 'time', 'set', 'timerange', 'timezone', 'boolean', 'duration', 'datetimerange'] |

**TODO** improve documentation about _builtinAllowList_

## connector

NOTHING HERE

## console-connector

**Tag** &rarr; N/A

| Setting | Type | Description |
| :------ | :--: | :---------- |
| botName |      |             |
| debug   |      |             |
| tag     |      |             |

**TODO**

## context

**Tag** &rarr; context

| Setting     | Type | Description |
| :---------- | :--: | :---------- |
| storageName |      |             |

**TODO**

## memory-storage

NOTHING HERE

## database

**Tag** &rarr; database

| Setting          | Description                                       |
| :--------------- | :------------------------------------------------ |
| memory.autosave  | Configuration applied to default memorydb-adapter |
| autosaveInterval | Configuration applied to default memorydb-adapter |
| autosaveFolder   | Configuration applied to default memorydb-adapter |

See [memory-adapter](#memory-adapter) below and [Persistence](/persistence/database) for more details.

## memory-adapter

**Tag** &rarr; memorydb-adapter

| Setting          |  Type   | Default value | Description                                                                                                                                               |
| :--------------- | :-----: | :-----------: | :-------------------------------------------------------------------------------------------------------------------------------------------------------- |
| autosave         | boolean |     false     | Whether to periodically persist the contents of the database to the filesystem                                                                            |
| autosaveInterval | integer |       0       | In case _autosave_ is true, the periodicity, in seconds, to save the contents.<br/>Setting it to 0 will automatically store any change to the filesystem. |
| autosaveFolder   | string  |     './'      | Path to the folder where the contents should be stored                                                                                                    |

:::info

Note that, even though memory-adapter uses the tag _memory_adapter_, corresponding configuration options are not loaded; only the
settings provided to the class constructor are used. This means that, if you want to provide a custom configuration for the default
MemorydbAdapter loaded by the _database_, you'll need to provide a configuration like this:

```json
{
  "settings": {
    "database": {
      "memory": {
        "autosave": true,
        "autosaveInterval": 10,
        "autosaveFolder": "./"
      }
    }
  }
}
```

:::

## dialogflow-connector

**Tag** &rarr; N/A

| Setting | Type | Description |
| :------ | :--: | :---------- |
| apiTag  |      |             |

**TODO**

## directline-connector

**Tag** &rarr; 'directline'

| Setting         |  Type   | Description                                                                                                                    |
| :-------------- | :-----: | :----------------------------------------------------------------------------------------------------------------------------- |
| autoRemoveFiles |         |                                                                                                                                |
| uploadDir       |         |                                                                                                                                |
| maxFileSize     |         |                                                                                                                                |
| log             | boolean | Whether to enable logging for this connector. Setting it to false, will prevent logs to appear no matter of the log level set. |
| channelId       | string  | The channelId that will appear in the activities used in the communication between the bot and the user                        |

When started, loads a directline-controller

## directline-controller

**Tag** &rarr; N/A

| Setting    | Type | Description                            |
| :--------- | :--: | :------------------------------------- |
| serviceUrl |      | defaults to env.DIRECTLINE_SERVICE_URL |
| botUrl     |      | defaults to env.DIRECTLINE_BOT_URL     |
| expiresIn  |      | defaults to 1800                       |

## express-api-app

**Tag** &rarr; N/A

| Setting    | Type | Description          |
| :--------- | :--: | :------------------- |
| serveBot   |      |                      |
| clientPath |      | defaults to 'public' |
| apiRoot    |      |                      |

## express-api-server

**Tag** &rarr; api-server

| Setting | Type | Description |
| :------ | :--: | :---------- |
| apiRoot |      |             |
| port    |      |             |

## express-api-serverless

**Tag** &rarr; api-server

| Setting   | Type | Description |
| :-------- | :--: | :---------- |
| apiRoot   |      |             |
| port      |      |             |
| serveBot? |      |             |

## fb-connector

**Tag** &rarr; fb

| Setting      | Type | Description |
| :----------- | :--: | :---------- |
| apiPath      |      |             |
| messagesPath |      |             |

## fullbot

**Tag** &rarr; N/A

| Setting         | Type | Description |
| :-------------- | :--: | :---------- |
| marketUrl       |      |             |
| port            |      |             |
| scripts         |      |             |
| mongoUrl        |      |             |
| ner.ducklingUrl |      |             |
| cardsPath       |      |             |
| actionsPath     |      |             |
| validatorsPath  |      |             |
| botPath         |      |             |

## mongodb-adapter

**Tag** &rarr; mongodb-adapter

| Setting |  Type  | Description                                                                                                                                         |
| :------ | :----: | :-------------------------------------------------------------------------------------------------------------------------------------------------- |
| url     | string | The connection string URI to use to connect to the database.<br/>If not specified,the value of the **MONGO_URL** environment variable will be used. |

## msbf-connector

**Tag** &rarr; msbf

| Setting      | Type | Description               |
| :----------- | :--: | :------------------------ |
| appId        |      | env.MSBF_BOT_APP_ID       |
| botPassword  |      | env.MSBF_BOT_APP_PASSWORD |
| apiPath      |      |                           |
| messagesPath |      | /api/messages             |

## ner

**Tag** &rarr; ner

| Setting       | Type | Description |
| :------------ | :--: | :---------- |
| threshold     |      |             |
| entityPreffix |      |             |
| entitySuffix  |      |             |

## neural-network

**Tag** &rarr; N/A

| Setting          | Type | Description |
| :--------------- | :--: | :---------- |
| log              |      |             |
| alpha            |      |             |
| momentum         |      |             |
| errorThresh      |      |             |
| deltaErrorThresh |      |             |
| iterations       |      |             |
| learningRate     |      |             |

**TODO** make sure non of them are initialized inside the class

## action-manager

NOTHING HERE

## nlg-manager

NOTHING HERE

## context-manager.js

**Tag** &rarr; context-manager

| Setting   | Type | Description |
| :-------- | :--: | :---------- |
| tableName |      |             |

## nlp

**Tag** &rarr; nlp

| Setting            | Type | Description |
| :----------------- | :--: | :---------- |
| forceNER           |      |             |
| languages?         |      |             |
| locales?           |      |             |
| calculateSentiment |      |             |
| corpora?           |      |             |
| autoLoad           |      |             |
| modelFileName      |      |             |
| threshold          |      |             |

## domain-manager

**Tag** &rarr; domain-manager-${this.settings.locale}

| Setting                 | Type | Description |
| :---------------------- | :--: | :---------- |
| locale                  |      |             |
| useStemDict             |      |             |
| domain-manager-??-train |      |             |
| trainByDomain           |      |             |
| useNoneFeature          |      |             |

## nlu-manager

**Tag** &rarr; domain-manager-${this.settings.locale}

| Setting | Type | Description |
| :------ | :--: | :---------- |
| locales |      |             |
| domain  |      |             |

## nlu

**Tag** &rarr; nlu-${this.settings.locale}

| Setting             | Type | Description |
| :------------------ | :--: | :---------- |
| locale              |      |             |
| nonedeltaValue      |      |             |
| nonedeltaMultiplier |      |             |

## nlu-luis.js

**Tag** &rarr; N/A

| Setting | Type | Description |
| :------ | :--: | :---------- |
| luisUrl |      |             |

## nlp-manager

**Tag** &rarr; N/A

| Setting            | Type | Description                                                             |
| :----------------- | :--: | :---------------------------------------------------------------------- |
| action             |      | seems to be added in the setting by the one calling the constructor (?) |
| processTransformer |      | seems to be added in the setting by the one calling the constructor (?) |

## brain-nlu

**Tag** &rarr; N/A

| Setting  | Type | Description |
| :------- | :--: | :---------- |
| locale   |      |             |
| language |      |             |

## conversation-context

NOTHING HERE

## recognizer

**Tag** &rarr; N/A

| Setting   | Type | Description |
| :-------- | :--: | :---------- |
| threshold |      |             |

## sentiment-manager

NOTHING HERE

## qa-client

**Tag** &rarr; N/A

| Setting   | Type | Description |
| :-------- | :--: | :---------- |
| modelName |      |             |
| modelDir  |      |             |
| proxy     |      |             |
| tokenizer |      |             |
| cased     |      |             |

## runtime

**TODO**

## rest-connector

**Tag** &rarr; rest

| Setting   | Type | Description |
| :-------- | :--: | :---------- |
| log       |      |             |
| apiTag    |      |             |
| channelId |      |             |

## sentiment-analyzer

**Tag** &rarr; sentiment-analyzer

## spell-check (similarity)

**Tag** &rarr; N/A

| Setting   | Type | Description |
| :-------- | :--: | :---------- |
| minLength |      |             |
| features  |      |             |

## spell-check (similarity-wa)

**Tag** &rarr; N/A

| Setting   | Type | Description |
| :-------- | :--: | :---------- |
| minLength |      |             |
| features  |      |             |

## nlp-analyzer

**Tag** &rarr; N/A

| Setting   | Type | Description |
| :-------- | :--: | :---------- |
| threshold |      |             |
